<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=ASCII-8BIT" http-equiv="Content-Type">

<title>class Methadone::CLILogger - Methadone - Power Up your Command Line Apps</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/methadone/cli_logger.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Logger
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-error_formatter-3D">#error_formatter=</a>
    
    <li><a href="#method-i-error_level-3D">#error_level=</a>
    
    <li><a href="#method-i-level-3D">#level=</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Methadone.html">Methadone</a>
  
    <li><a href="../Methadone/CLI.html">Methadone::CLI</a>
  
    <li><a href="../Methadone/CLILogger.html">Methadone::CLILogger</a>
  
    <li><a href="../Methadone/CLILogging.html">Methadone::CLILogging</a>
  
    <li><a href="../Methadone/Cucumber.html">Methadone::Cucumber</a>
  
    <li><a href="../Methadone/Error.html">Methadone::Error</a>
  
    <li><a href="../Methadone/ExecutionStrategy.html">Methadone::ExecutionStrategy</a>
  
    <li><a href="../Methadone/ExecutionStrategy/Base.html">Methadone::ExecutionStrategy::Base</a>
  
    <li><a href="../Methadone/ExecutionStrategy/JVM.html">Methadone::ExecutionStrategy::JVM</a>
  
    <li><a href="../Methadone/ExecutionStrategy/MRI.html">Methadone::ExecutionStrategy::MRI</a>
  
    <li><a href="../Methadone/ExecutionStrategy/Open_3.html">Methadone::ExecutionStrategy::Open_3</a>
  
    <li><a href="../Methadone/ExecutionStrategy/Open_4.html">Methadone::ExecutionStrategy::Open_4</a>
  
    <li><a href="../Methadone/ExecutionStrategy/RBXOpen_4.html">Methadone::ExecutionStrategy::RBXOpen_4</a>
  
    <li><a href="../Methadone/ExitNow.html">Methadone::ExitNow</a>
  
    <li><a href="../Methadone/FailedCommandError.html">Methadone::FailedCommandError</a>
  
    <li><a href="../Methadone/Main.html">Methadone::Main</a>
  
    <li><a href="../Methadone/OptionParserProxy.html">Methadone::OptionParserProxy</a>
  
    <li><a href="../Methadone/ProcessStatus.html">Methadone::ProcessStatus</a>
  
    <li><a href="../Methadone/SH.html">Methadone::SH</a>
  
    <li><a href="../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Methadone::CLILogger</h1>

  <div id="description" class="description">
    
<p>A Logger instance that gives better control of messaging the user and
logging app activity.  At it's most basic, you would use <code>info</code>
as a replacement for <code>puts</code> and <code>error</code> as a
replacement for <code>STDERR.puts</code>.  Since this is a logger, however,
you can also use debug, warn, and fatal, and you can control the format and
"logging level" as such.</p>

<p>So, by default:</p>
<ul><li>
<p>debug messages do not appear anywhere</p>
</li><li>
<p>info messages appear on the standard output</p>
</li><li>
<p>warn, error, and fatal messagse appear on the standard error</p>
</li><li>
<p>The default format of messages is simply the message, no logging cruft,
however if your output is redirected to a file, a better timestamped
logging format is used</p>
</li></ul>

<p>You can customize this in several ways:</p>
<ul><li>
<p>You can override the devices used by passing different devices to the
constructor</p>
</li><li>
<p>You can adjust the level of message that goes to the error logger via
error_level=</p>
</li><li>
<p>You can adjust the format for messages to the error logger separately via
error_formatter=</p>
</li></ul>

<h3 id="label-Example">Example</h3>

<pre class="ruby"><span class="ruby-identifier">logger</span> = <span class="ruby-constant">CLILogger</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-string">&quot;Starting up&quot;</span>) <span class="ruby-comment"># =&gt; only the standard output gets this</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;careful!&quot;</span>) <span class="ruby-comment"># =&gt; only the standard error gets this</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span>(<span class="ruby-string">&quot;Something went wrong!&quot;</span>) <span class="ruby-comment"># =&gt; only the standard error gets this</span>

<span class="ruby-identifier">logger</span> = <span class="ruby-constant">CLILogger</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error_level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">ERROR</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-string">&quot;Starting up&quot;</span>) <span class="ruby-comment"># =&gt; only the standard output gets this</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;careful!&quot;</span>) <span class="ruby-comment"># =&gt; only the standard OUTPUT gets this</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span>(<span class="ruby-string">&quot;Something went wrong!&quot;</span>) <span class="ruby-comment"># =&gt; only the standard error gets this</span>

<span class="ruby-identifier">logger</span> = <span class="ruby-constant">CLILogger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'logfile.txt'</span>)
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-string">&quot;Starting up&quot;</span>) <span class="ruby-comment"># =&gt; logfile.txt gets this</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span>(<span class="ruby-string">&quot;Something went wrong!&quot;</span>) <span class="ruby-comment"># =&gt; BOTH logfile.txt AND the standard error get this</span>
</pre>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="BLANK_FORMAT">BLANK_FORMAT
        
        <dd class="description">
        
      
        <dt id="DEFAULT_ERROR_LEVEL">DEFAULT_ERROR_LEVEL
        
        <dd class="description">
        
      
      </dl>
    </section>
    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(log_device=$stdout,error_device=$stderr)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>A logger that logs error-type messages to a second device; useful for
ensuring that error messages go to standard error.  This should be pretty
smart about doing the right thing.  If both log devices are ttys, e.g. one
is going to standard error and the other to the standard output, messages
only appear once in the overall output stream.  In other words, an ERROR
logged will show up <strong>only</strong> in the standard error.  If either
log device is NOT a tty, then all messages go to <code>log_device</code>
and only errors go to <code>error_device</code></p>
<dl class="rdoc-list note-list"><dt><code>log_device</code>
<dd>
<p>device where all log messages should go, based on level</p>
</dd><dt><code>error_device</code>
<dd>
<p>device where all error messages should go.  By default, this is
Logger::Severity::WARN</p>
</dd></dl>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/methadone/cli_logger.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">log_device</span>=<span class="ruby-identifier">$stdout</span>,<span class="ruby-identifier">error_device</span>=<span class="ruby-identifier">$stderr</span>)
  <span class="ruby-keyword">super</span>(<span class="ruby-identifier">log_device</span>)
  <span class="ruby-ivar">@stderr_logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">error_device</span>)

  <span class="ruby-ivar">@split_logs</span> = <span class="ruby-identifier">log_device</span>.<span class="ruby-identifier">tty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">error_device</span>.<span class="ruby-identifier">tty?</span>

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">Severity</span><span class="ruby-operator">::</span><span class="ruby-constant">INFO</span>
  <span class="ruby-ivar">@stderr_logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">DEFAULT_ERROR_LEVEL</span>

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">formatter</span> = <span class="ruby-constant">BLANK_FORMAT</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">log_device</span>.<span class="ruby-identifier">tty?</span>
  <span class="ruby-ivar">@stderr_logger</span>.<span class="ruby-identifier">formatter</span> = <span class="ruby-constant">BLANK_FORMAT</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">error_device</span>.<span class="ruby-identifier">tty?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-error_formatter-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">error_formatter=</span><span
            class="method-args">(formatter)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Overrides the formatter for the error logger.  A future call to formatter=
will affect both, so the order of the calls matters.</p>
<dl class="rdoc-list note-list"><dt><code>formatter</code>
<dd>
<p>Proc that handles the formatting, the same as for formatter=</p>
</dd></dl>
          

          
          <div class="method-source-code" id="error_formatter-3D-source">
            <pre><span class="ruby-comment"># File lib/methadone/cli_logger.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">error_formatter=</span>(<span class="ruby-identifier">formatter</span>)
  <span class="ruby-ivar">@stderr_logger</span>.<span class="ruby-identifier">formatter</span>=<span class="ruby-identifier">formatter</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- error_formatter-3D-source -->
          
        </div>

        

        
      </div><!-- error_formatter-3D-method -->

    
      <div id="method-i-error_level-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">error_level=</span><span
            class="method-args">(level)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Set the threshold for what messages go to the error device.  Note that
calling <a href="CLILogger.html#method-i-level-3D">level=</a> will
<strong>not</strong> affect the error logger <strong>unless</strong> both
devices are TTYs.</p>
<dl class="rdoc-list note-list"><dt><code>level</code>
<dd>
<p>a constant from Logger::Severity for the level of messages that should go
to the error logger</p>
</dd></dl>
          

          
          <div class="method-source-code" id="error_level-3D-source">
            <pre><span class="ruby-comment"># File lib/methadone/cli_logger.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">error_level=</span>(<span class="ruby-identifier">level</span>)
  <span class="ruby-ivar">@stderr_logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">level</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- error_level-3D-source -->
          
        </div>

        

        
      </div><!-- error_level-3D-method -->

    
      <div id="method-i-level-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">level=</span><span
            class="method-args">(level)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="level-3D-source">
            <pre><span class="ruby-comment"># File lib/methadone/cli_logger.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">level=</span>(<span class="ruby-identifier">level</span>)
  <span class="ruby-keyword">super</span>(<span class="ruby-identifier">level</span>)
  <span class="ruby-identifier">current_error_level</span> = <span class="ruby-ivar">@stderr_logger</span>.<span class="ruby-identifier">level</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">level</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">DEFAULT_ERROR_LEVEL</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@split_logs</span>
    <span class="ruby-ivar">@stderr_logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-identifier">level</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- level-3D-source -->
          
        </div>

        

        
      </div><!-- level-3D-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

